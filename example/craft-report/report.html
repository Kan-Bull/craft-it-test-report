<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Craft Test Report</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>:root {
  --color-passed: #10b981;
  --color-failed: #ef4444;
  --color-skipped: #f59e0b;
  --color-bg: #f8fafc;
  --color-card: #ffffff;
  --color-border: #e2e8f0;
  --color-text: #1e293b;
  --color-text-muted: #64748b;
  --color-primary: #3b82f6;
  --color-primary-hover: #2563eb;
  --shadow: 0 1px 3px rgba(0,0,0,0.1);
  --radius: 8px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: var(--color-bg);
  color: var(--color-text);
  line-height: 1.5;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 24px;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
  padding: 20px 24px;
  background: var(--color-card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.header-brand {
  flex-shrink: 0;
}

.header-brand img {
  height: 48px;
  width: auto;
}

.header-content {
  flex: 1;
}

.header h1 {
  font-size: 24px;
  font-weight: 600;
}

.header-meta {
  color: var(--color-text-muted);
  font-size: 14px;
  margin-top: 4px;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-primary {
  background: var(--color-primary);
  color: white;
}

.btn-primary:hover {
  background: var(--color-primary-hover);
}

.btn-secondary {
  background: var(--color-border);
  color: var(--color-text);
}

.btn-secondary:hover {
  background: #cbd5e1;
}

/* Summary Section */
.summary {
  display: flex;
  gap: 48px;
  margin-bottom: 24px;
  padding: 24px;
  background: var(--color-card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.summary-chart {
  flex-shrink: 0;
  width: 200px;
  height: 200px;
}

.summary-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  flex: 1;
  align-items: center;
  align-content: center;
  padding-left: 24px;
}

.stat-card {
  padding: 16px 24px;
  border-radius: var(--radius);
  min-width: 100px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.stat-value {
  font-size: 32px;
  font-weight: 700;
  line-height: 1.2;
}

.stat-label {
  font-size: 14px;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-total { background: #f1f5f9; }
.stat-passed { background: #d1fae5; }
.stat-passed .stat-value { color: var(--color-passed); }
.stat-failed { background: #fee2e2; }
.stat-failed .stat-value { color: var(--color-failed); }
.stat-skipped { background: #fef3c7; }
.stat-skipped .stat-value { color: var(--color-skipped); }
.stat-duration { background: #e0e7ff; }
.stat-duration .stat-value { color: #4f46e5; }

/* Filters */
.filters {
  margin-bottom: 24px;
  padding: 16px 24px;
  background: var(--color-card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.filter-row {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}

.search-input {
  flex: 1;
  min-width: 250px;
  padding: 10px 16px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 14px;
}

.search-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.filter-select {
  padding: 10px 16px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 14px;
  background: white;
  cursor: pointer;
}

/* Tests Table */
.tests-section {
  background: var(--color-card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.tests-table {
  width: 100%;
  border-collapse: collapse;
}

.tests-table th {
  background: #f8fafc;
  padding: 14px 16px;
  text-align: left;
  font-weight: 600;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-muted);
  border-bottom: 2px solid var(--color-border);
}

.tests-table td {
  padding: 14px 16px;
  border-bottom: 1px solid var(--color-border);
  vertical-align: top;
}

.tests-table tbody tr:hover {
  background: #f8fafc;
}

.col-status { width: 90px; }
.col-name { min-width: 200px; }
.col-description { min-width: 150px; }
.col-metadata { min-width: 120px; }
.col-duration { width: 100px; white-space: nowrap; }
.col-error { min-width: 200px; }
.col-comment { min-width: 180px; }

/* Error and Comment Cells */
.error-cell,
.comment-cell {
  vertical-align: top;
}

/* Status Badge */
.status-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.status-passed { background: #d1fae5; color: var(--color-passed); }
.status-failed { background: #fee2e2; color: var(--color-failed); }
.status-timedOut { background: #fee2e2; color: var(--color-failed); }
.status-skipped { background: #fef3c7; color: var(--color-skipped); }

/* Retry Badge */
.retry-badge {
  display: inline-block;
  padding: 2px 6px;
  margin-left: 6px;
  background: #fef3c7;
  color: #d97706;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
}

/* Test Name */
.test-name {
  font-weight: 500;
  color: var(--color-text);
}

.test-id {
  display: none;
}

/* Metadata Tags */
.metadata-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.metadata-tag {
  display: inline-block;
  padding: 2px 8px;
  background: #e0e7ff;
  color: #4f46e5;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.metadata-tag.severity-blocker { background: #fee2e2; color: var(--color-failed); }
.metadata-tag.severity-critical { background: #ffedd5; color: #ea580c; }
.metadata-tag.owner { background: #dbeafe; color: #2563eb; }

/* Error Trace */
.error-trace {
  max-height: 200px;
  overflow-y: auto;
}

.error-content pre {
  font-family: 'SF Mono', Monaco, 'Courier New', monospace;
  font-size: 11px;
  line-height: 1.6;
  background: #fef2f2;
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  word-break: break-word;
  color: var(--color-failed);
  margin: 0;
  max-height: 200px;
  overflow-y: auto;
}

.error-toggle {
  color: var(--color-primary);
  cursor: pointer;
  font-size: 12px;
  text-decoration: underline;
}

/* Comment Field */
.comment-field {
  width: 100%;
  min-height: 80px;
  padding: 10px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-family: inherit;
  resize: vertical;
}

.comment-field:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Footer */
.footer {
  margin-top: 24px;
  padding: 16px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 14px;
}

/* Print Styles */
@media print {
  body {
    background: white;
    font-size: 10px;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .container {
    max-width: none;
    padding: 10px;
  }

  .header-actions,
  .filters,
  .error-toggle {
    display: none !important;
  }

  .header,
  .summary,
  .tests-section {
    box-shadow: none;
    border: 1px solid var(--color-border);
    margin-bottom: 15px;
  }

  .header-brand img {
    height: 36px;
  }

  .summary {
    page-break-inside: avoid;
  }

  .summary-chart {
    width: 180px;
    height: 180px;
    flex-shrink: 0;
  }

  .summary-stats {
    gap: 10px;
  }

  .stat-card {
    padding: 10px 15px;
    min-width: 80px;
  }

  .stat-value {
    font-size: 24px;
  }

  .stat-label {
    font-size: 11px;
  }

  /* Table for print - start on new page */
  .tests-section {
    overflow: visible;
    page-break-before: always;
  }

  .tests-table {
    font-size: 9px;
    table-layout: auto;
    width: 100%;
  }

  .tests-table th {
    padding: 6px 8px;
    white-space: nowrap;
  }

  .tests-table td {
    padding: 6px 8px;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .col-status { width: 60px; }
  .col-name { width: 18%; }
  .col-description { width: 15%; }
  .col-metadata { width: 12%; }
  .col-duration { width: 50px; }
  .col-error { width: 20%; }
  .col-comment { width: 20%; }

  .test-name {
    font-size: 9px;
  }

  .status-badge {
    padding: 2px 6px;
    font-size: 8px;
  }

  .metadata-tag {
    font-size: 8px;
    padding: 1px 4px;
  }

  /* Error trace for print - always show */
  .error-content {
    display: block !important;
  }

  .error-cell pre {
    font-size: 7px;
    padding: 6px;
    max-height: 80px;
    overflow: hidden;
    white-space: pre-wrap;
    word-break: break-word;
  }

  /* Comment field for print */
  .comment-field {
    border: 1px solid var(--color-border);
    background: #f8fafc;
    min-height: 40px;
    height: auto;
    font-size: 8px;
    padding: 6px;
    resize: none;
    overflow: visible;
  }

  /* Hide empty comments in print */
  .comment-field:placeholder-shown {
    display: none !important;
  }

  .comment-field.empty-comment {
    display: none !important;
  }

  tr {
    page-break-inside: avoid;
  }

  .footer {
    font-size: 9px;
    margin-top: 10px;
  }

  /* Force all columns visible in print (override responsive hiding) */
  .col-metadata,
  .col-description {
    display: table-cell !important;
  }
}

/* Responsive */
@media (max-width: 1024px) {
  .summary {
    flex-direction: column;
    align-items: center;
  }

  .summary-stats {
    justify-content: center;
  }

  .col-metadata,
  .col-description {
    display: none;
  }
}

@media (max-width: 768px) {
  .header {
    flex-direction: column;
    gap: 16px;
  }

  .header-actions {
    flex-wrap: wrap;
    justify-content: center;
  }

  .filter-row {
    flex-direction: column;
  }

  .search-input {
    min-width: 100%;
  }
}
</style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="header-brand">
        
      </div>
      <div class="header-content">
        <h1>Craft Test Report</h1>
        <div class="header-meta">
          <span id="report-timestamp"></span>
        </div>
      </div>
      <div class="header-actions">
        <button id="export-pdf" class="btn btn-primary">Export PDF</button>
      </div>
    </header>

    <section class="summary">
      <div class="summary-chart">
        <canvas id="results-chart"></canvas>
      </div>
      <div class="summary-stats">
        <div class="stat-card stat-total">
          <div class="stat-value" id="total-count">0</div>
          <div class="stat-label">Total</div>
        </div>
        <div class="stat-card stat-passed">
          <div class="stat-value" id="passed-count">0</div>
          <div class="stat-label">Passed</div>
        </div>
        <div class="stat-card stat-failed">
          <div class="stat-value" id="failed-count">0</div>
          <div class="stat-label">Failed</div>
        </div>
        <div class="stat-card stat-skipped">
          <div class="stat-value" id="skipped-count">0</div>
          <div class="stat-label">Skipped</div>
        </div>
        <div class="stat-card stat-duration">
          <div class="stat-value" id="duration-value">0s</div>
          <div class="stat-label">Duration</div>
        </div>
      </div>
    </section>

    <section class="filters">
      <div class="filter-row">
        <input type="text" id="search" class="search-input" placeholder="Search tests by name, ID, or description...">
        <select id="status-filter" class="filter-select">
          <option value="all">All Statuses</option>
          <option value="passed">Passed</option>
          <option value="failed">Failed</option>
          <option value="skipped">Skipped</option>
        </select>
        <select id="severity-filter" class="filter-select">
          <option value="all">All Severities</option>
          <option value="blocker">Blocker</option>
          <option value="critical">Critical</option>
          <option value="normal">Normal</option>
          <option value="minor">Minor</option>
          <option value="trivial">Trivial</option>
        </select>
        <select id="epic-filter" class="filter-select">
          <option value="all">All Epics</option>
        </select>
      </div>
    </section>

    <section class="tests-section">
      <table class="tests-table" id="tests-table">
        <thead>
          <tr>
            <th class="col-status">Status</th>
            <th class="col-name">Name</th>
            <th class="col-description">Desc</th>
            <th class="col-metadata">Meta</th>
            <th class="col-duration">Time</th>
            <th class="col-error">Error</th>
            <th class="col-comment">Notes</th>
          </tr>
        </thead>
        <tbody id="tests-body"></tbody>
      </table>
    </section>

    <footer class="footer">
      <p>Generated by <strong>Craft Test Report</strong> on <span id="footer-timestamp"></span></p>
    </footer>
  </div>

  <script>
    const REPORT_DATA = {"timestamp":"2025-12-15T14:33:27.608Z","totalTests":31,"passed":25,"failed":3,"skipped":3,"duration":3967,"tests":[{"testId":"90cda532ab82d274b30b-6591275a1a2e04c5cde7","name":"Widget data auto-refreshes at configured interval","fullTitle":" > chromium > dashboard.spec.ts > Dashboard > Widget data auto-refreshes at configured interval","status":"passed","duration":541,"metadata":{"epic":"Workflow","feature":"Dashboard","suite":"Widget Display","subSuite":"E2E","description":"Verifies widget data refreshes automatically without page reload.","tags":["dashboard","refresh"],"severity":"normal","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/dashboard.spec.ts","line":39,"startTime":"2025-12-15T14:33:23.946Z","retries":0},{"testId":"70f6afe7e350c931056e-1baf4db5fbc88c7f4886","name":"Session expires after inactivity timeout","fullTitle":" > chromium > authentication.spec.ts > Authentication > Session expires after inactivity timeout","status":"passed","duration":550,"metadata":{"epic":"Security","feature":"Authentication","suite":"Session Management","subSuite":"E2E","description":"Verifies that user session expires after configured inactivity period.","tags":["auth","security"],"severity":"critical","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/authentication.spec.ts","line":40,"startTime":"2025-12-15T14:33:23.950Z","retries":0},{"testId":"90cda532ab82d274b30b-867a36620f0a6df45eba","name":"All dashboard widgets render correctly","fullTitle":" > chromium > dashboard.spec.ts > Dashboard > All dashboard widgets render correctly","status":"passed","duration":564,"metadata":{"epic":"Workflow","feature":"Dashboard","suite":"Widget Display","subSuite":"E2E","description":"Verifies all configured widgets are visible and display data.","tags":["dashboard","widgets","ui"],"severity":"critical","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/dashboard.spec.ts","line":21,"startTime":"2025-12-15T14:33:23.945Z","retries":0},{"testId":"0549c65d315e06777d95-fd05e895d06790bf134a","name":"Export to PDF generates valid document","fullTitle":" > chromium > data-export.spec.ts > Data Export > Export to PDF generates valid document","status":"passed","duration":567,"metadata":{"epic":"Workflow","feature":"Data Export","suite":"Export Formats","subSuite":"E2E","description":"Verifies PDF export produces valid, downloadable document.","tags":["export","pdf"],"severity":"critical","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/data-export.spec.ts","line":4,"startTime":"2025-12-15T14:33:23.953Z","retries":0},{"testId":"90cda532ab82d274b30b-e08ae2175dc95808ab0d","name":"Dashboard loads within performance threshold","fullTitle":" > chromium > dashboard.spec.ts > Dashboard > Dashboard loads within performance threshold","status":"passed","duration":569,"metadata":{"epic":"Performance","feature":"Dashboard","suite":"Page Load","subSuite":"E2E","description":"Verifies dashboard page loads within 3 second threshold.","tags":["performance","ui"],"severity":"critical","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/dashboard.spec.ts","line":4,"startTime":"2025-12-15T14:33:23.950Z","retries":0},{"testId":"70f6afe7e350c931056e-946f9f260c90b5ea2776","name":"User can login with valid credentials","fullTitle":" > chromium > authentication.spec.ts > Authentication > User can login with valid credentials","status":"passed","duration":576,"metadata":{"epic":"E2E Critical Scenarios","feature":"Authentication","suite":"Login Flow","subSuite":"E2E","description":"Verifies that users can successfully authenticate with valid username and password.","tags":["auth","ui"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/authentication.spec.ts","line":4,"startTime":"2025-12-15T14:33:23.951Z","retries":0},{"testId":"70f6afe7e350c931056e-f8cba80c73315227ee8f","name":"User sees error message with invalid credentials","fullTitle":" > chromium > authentication.spec.ts > Authentication > User sees error message with invalid credentials","status":"failed","duration":542,"errorTrace":"Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m\nError: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mtrue\u001b[39m\n    at /Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/authentication.spec.ts:37:18","metadata":{"epic":"E2E Critical Scenarios","feature":"Authentication","suite":"Login Flow","subSuite":"E2E","description":"Verifies that appropriate error message is displayed when login fails.","tags":["auth","ui","negative"],"severity":"critical","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/authentication.spec.ts","line":21,"startTime":"2025-12-15T14:33:26.145Z","retries":2},{"testId":"0549c65d315e06777d95-169fa1cc63aa63658f42","name":"Export respects applied filters","fullTitle":" > chromium > data-export.spec.ts > Data Export > Export respects applied filters","status":"passed","duration":351,"metadata":{"epic":"Workflow","feature":"Data Export","suite":"Export Formats","subSuite":"E2E","description":"Verifies exported data only includes filtered results.","tags":["export","filters"],"severity":"normal","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/data-export.spec.ts","line":38,"startTime":"2025-12-15T14:33:24.894Z","retries":0},{"testId":"0549c65d315e06777d95-071f80d707b33ee10b0c","name":"Export to Excel includes all columns","fullTitle":" > chromium > data-export.spec.ts > Data Export > Export to Excel includes all columns","status":"passed","duration":357,"metadata":{"epic":"Workflow","feature":"Data Export","suite":"Export Formats","subSuite":"E2E","description":"Verifies Excel export contains all visible table columns.","tags":["export","excel"],"severity":"critical","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/data-export.spec.ts","line":21,"startTime":"2025-12-15T14:33:24.890Z","retries":0},{"testId":"9245d37f6983c02d8645-abd1fdab2027bd8f9ec8","name":"Advanced filters narrow search results","fullTitle":" > chromium > entity-search.spec.ts > Entity Search > Advanced filters narrow search results","status":"passed","duration":360,"metadata":{"epic":"Workflow","feature":"Entity Search","suite":"Search Functionality","subSuite":"E2E","description":"Verifies advanced filter options correctly filter search results.","tags":["search","filters"],"severity":"critical","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/entity-search.spec.ts","line":22,"startTime":"2025-12-15T14:33:24.911Z","retries":0},{"testId":"59ee17b36fa319269327-b468cc873dc20d0692aa","name":"GUP Final PD is correctly calculated and displayed","fullTitle":" > chromium > gup-summary.spec.ts > GUP Summary Page > GUP Final PD is correctly calculated and displayed","status":"passed","duration":361,"metadata":{"epic":"E2E Critical Scenarios","feature":"GUP in Summary","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies that GUP Final PD is correctly calculated and displayed on the Summary page for GUP entities.","tags":["GUP","ui"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/gup-summary.spec.ts","line":4,"startTime":"2025-12-15T14:33:24.919Z","retries":0},{"testId":"9245d37f6983c02d8645-cfb822b972d870acdeca","name":"Search handles special characters correctly","fullTitle":" > chromium > entity-search.spec.ts > Entity Search > Search handles special characters correctly","status":"failed","duration":581,"errorTrace":"Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"test\"\u001b[39m\nReceived: \u001b[31m\"test\u001b[7m&special\u001b[27m\"\u001b[39m\nError: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"test\"\u001b[39m\nReceived: \u001b[31m\"test\u001b[7m&special\u001b[27m\"\u001b[39m\n    at /Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/entity-search.spec.ts:54:28","metadata":{"epic":"Workflow","feature":"Entity Search","suite":"Search Functionality","subSuite":"E2E","description":"Verifies search correctly handles special characters and unicode.","tags":["search","edge-case"],"severity":"minor","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/entity-search.spec.ts","line":39,"startTime":"2025-12-15T14:33:26.512Z","retries":2},{"testId":"9245d37f6983c02d8645-c70613ad40f221bc3f5b","name":"Search returns matching entities","fullTitle":" > chromium > entity-search.spec.ts > Entity Search > Search returns matching entities","status":"passed","duration":403,"metadata":{"epic":"E2E Critical Scenarios","feature":"Entity Search","suite":"Search Functionality","subSuite":"E2E","description":"Verifies search returns all entities matching the query criteria.","tags":["search","entity","ui"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/entity-search.spec.ts","line":4,"startTime":"2025-12-15T14:33:24.908Z","retries":0},{"testId":"0a12ca241492fbbc1ff4-7a668201fb1981f38ced","name":"Historical scorecard data loads correctly","fullTitle":" > chromium > lcpd-scorecard.spec.ts > LCPD Scorecard > Historical scorecard data loads correctly","status":"skipped","duration":0,"metadata":{"epic":"Workflow","feature":"Risk Assessment","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies historical scorecard data can be viewed and compared.","tags":["LCPD","history"],"severity":"normal","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/lcpd-scorecard.spec.ts","line":40,"startTime":"2025-12-15T14:33:25.317Z","retries":0},{"testId":"59ee17b36fa319269327-c1b4d8e211eac28214b4","name":"Summary page displays all GUP metrics","fullTitle":" > chromium > gup-summary.spec.ts > GUP Summary Page > Summary page displays all GUP metrics","status":"passed","duration":350,"metadata":{"epic":"E2E Critical Scenarios","feature":"GUP in Summary","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies all required GUP metrics are visible on the Summary page.","tags":["GUP","Summary","ui"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/gup-summary.spec.ts","line":21,"startTime":"2025-12-15T14:33:25.253Z","retries":0},{"testId":"59ee17b36fa319269327-8cba642f1f5446452918","name":"GUP data refreshes when entity changes","fullTitle":" > chromium > gup-summary.spec.ts > GUP Summary Page > GUP data refreshes when entity changes","status":"passed","duration":362,"metadata":{"epic":"E2E Critical Scenarios","feature":"GUP in Summary","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies GUP data updates correctly when switching between entities.","tags":["GUP","ui"],"severity":"critical","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/gup-summary.spec.ts","line":39,"startTime":"2025-12-15T14:33:25.254Z","retries":0},{"testId":"0a12ca241492fbbc1ff4-e0cc772ccaee30ee17bd","name":"Scorecard calculations match backend values","fullTitle":" > chromium > lcpd-scorecard.spec.ts > LCPD Scorecard > Scorecard calculations match backend values","status":"passed","duration":337,"metadata":{"epic":"E2E Critical Scenarios","feature":"Risk Assessment","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies frontend scorecard values match API response data.","tags":["LCPD","api","integration"],"severity":"blocker","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/lcpd-scorecard.spec.ts","line":22,"startTime":"2025-12-15T14:33:25.289Z","retries":0},{"testId":"0a12ca241492fbbc1ff4-2989d161d60f9f65f501","name":"Scorecard displays correct risk ratings","fullTitle":" > chromium > lcpd-scorecard.spec.ts > LCPD Scorecard > Scorecard displays correct risk ratings","status":"passed","duration":359,"metadata":{"epic":"E2E Critical Scenarios","feature":"Risk Assessment","suite":"LCPD Scorecard","subSuite":"E2E","description":"Verifies that LCPD scorecard shows accurate risk ratings for all categories.","tags":["LCPD","risk","ui"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/lcpd-scorecard.spec.ts","line":4,"startTime":"2025-12-15T14:33:25.280Z","retries":0},{"testId":"be7d0958780d1a4666e5-31ca9b293111652f9286","name":"User receives real-time notifications","fullTitle":" > chromium > notifications.spec.ts > Notifications > User receives real-time notifications","status":"passed","duration":352,"metadata":{"epic":"Workflow","feature":"Notifications","suite":"Real-time Updates","subSuite":"E2E","description":"Verifies notifications appear in real-time without page refresh.","tags":["notifications","websocket","ui"],"severity":"critical","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/notifications.spec.ts","line":4,"startTime":"2025-12-15T14:33:25.318Z","retries":0},{"testId":"be7d0958780d1a4666e5-a8c6f5f998a6fd2dc039","name":"Notification preferences are saved correctly","fullTitle":" > chromium > notifications.spec.ts > Notifications > Notification preferences are saved correctly","status":"passed","duration":529,"metadata":{"epic":"Workflow","feature":"Notifications","suite":"Preferences","subSuite":"E2E","description":"Verifies user notification preferences persist across sessions.","tags":["notifications","settings"],"severity":"normal","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/notifications.spec.ts","line":22,"startTime":"2025-12-15T14:33:25.609Z","retries":0},{"testId":"d2ea609703bae19dcdce-0e9b1ae0965d57bb69be","name":"Report data caching improves performance","fullTitle":" > chromium > reports.spec.ts > Report Generation > Report data caching improves performance","status":"skipped","duration":0,"metadata":{"epic":"Performance","feature":"Reporting","suite":"Optimization","subSuite":"E2E","description":"Verifies report caching reduces load time on repeated access.","tags":["reports","performance","cache"],"severity":"minor","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/reports.spec.ts","line":57,"startTime":"2025-12-15T14:33:26.143Z","retries":0},{"testId":"be7d0958780d1a4666e5-10c01a2753f14d9dfc46","name":"Email notifications are triggered correctly","fullTitle":" > chromium > notifications.spec.ts > Notifications > Email notifications are triggered correctly","status":"failed","duration":344,"errorTrace":"Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\nError: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at /Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/notifications.spec.ts:55:19","metadata":{"epic":"Workflow","feature":"Notifications","suite":"Email Delivery","subSuite":"E2E","description":"Verifies email notifications are sent for configured events.","tags":["notifications","email","integration"],"severity":"critical","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/notifications.spec.ts","line":39,"startTime":"2025-12-15T14:33:27.210Z","retries":2},{"testId":"d2ea609703bae19dcdce-362ea0834973ba19c9b1","name":"Scheduled reports run at configured time","fullTitle":" > chromium > reports.spec.ts > Report Generation > Scheduled reports run at configured time","status":"passed","duration":552,"metadata":{"epic":"E2E Critical Scenarios","feature":"Reporting","suite":"Scheduled Reports","subSuite":"E2E","description":"Verifies scheduled reports execute at the configured time.","tags":["reports","scheduler"],"severity":"blocker","owner":"Quentin","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/reports.spec.ts","line":4,"startTime":"2025-12-15T14:33:25.632Z","retries":0},{"testId":"d2ea609703bae19dcdce-7a0064e447ef9bf4ba62","name":"Custom report templates render correctly","fullTitle":" > chromium > reports.spec.ts > Report Generation > Custom report templates render correctly","status":"passed","duration":540,"metadata":{"epic":"Workflow","feature":"Reporting","suite":"Custom Templates","subSuite":"E2E","description":"Verifies custom report templates produce expected output.","tags":["reports","templates","ui"],"severity":"critical","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/reports.spec.ts","line":21,"startTime":"2025-12-15T14:33:25.647Z","retries":0},{"testId":"d2ea609703bae19dcdce-a18d90f109ebd7c5c07d","name":"Report sharing via email works","fullTitle":" > chromium > reports.spec.ts > Report Generation > Report sharing via email works","status":"passed","duration":526,"metadata":{"epic":"Workflow","feature":"Reporting","suite":"Distribution","subSuite":"E2E","description":"Verifies reports can be shared via email with attachments.","tags":["reports","email","integration"],"severity":"critical","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/reports.spec.ts","line":39,"startTime":"2025-12-15T14:33:25.676Z","retries":0},{"testId":"d877ffdf71ec720167ae-66e1d1f425d7030411c0","name":"Timezone setting affects all date displays","fullTitle":" > chromium > settings.spec.ts > Application Settings > Timezone setting affects all date displays","status":"passed","duration":515,"metadata":{"epic":"User Experience","feature":"Settings","suite":"User Preferences","subSuite":"E2E","description":"Verifies timezone preference correctly adjusts all timestamps.","tags":["settings","timezone"],"severity":"normal","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/settings.spec.ts","line":40,"startTime":"2025-12-15T14:33:26.194Z","retries":0},{"testId":"43a5413b2d4cd77ef4f1-6baa8ac3d56ebc071760","name":"Admin can create new user account","fullTitle":" > chromium > user-management.spec.ts > User Management > Admin can create new user account","status":"passed","duration":513,"metadata":{"epic":"Administration","feature":"User Management","suite":"User CRUD","subSuite":"E2E","description":"Verifies admin users can successfully create new user accounts.","tags":["admin","users","ui"],"severity":"blocker","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/user-management.spec.ts","line":4,"startTime":"2025-12-15T14:33:26.208Z","retries":0},{"testId":"43a5413b2d4cd77ef4f1-79037ee3150f43b47ed3","name":"Bulk user import from CSV","fullTitle":" > chromium > user-management.spec.ts > User Management > Bulk user import from CSV","status":"skipped","duration":0,"metadata":{"epic":"Administration","feature":"User Management","suite":"User CRUD","subSuite":"E2E","description":"Verifies bulk user import correctly processes CSV files.","tags":["admin","import"],"severity":"normal","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/user-management.spec.ts","line":39,"startTime":"2025-12-15T14:33:26.726Z","retries":0},{"testId":"d877ffdf71ec720167ae-ce2e4c819481624d70b3","name":"Theme preference persists across sessions","fullTitle":" > chromium > settings.spec.ts > Application Settings > Theme preference persists across sessions","status":"passed","duration":598,"metadata":{"epic":"User Experience","feature":"Settings","suite":"User Preferences","subSuite":"E2E","description":"Verifies selected theme (dark/light) persists after logout/login.","tags":["settings","theme","ui"],"severity":"minor","owner":"Emma","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/settings.spec.ts","line":4,"startTime":"2025-12-15T14:33:26.144Z","retries":0},{"testId":"d877ffdf71ec720167ae-836b35204bc6bc6638c2","name":"Language selection changes all UI text","fullTitle":" > chromium > settings.spec.ts > Application Settings > Language selection changes all UI text","status":"passed","duration":563,"metadata":{"epic":"User Experience","feature":"Settings","suite":"Localization","subSuite":"E2E","description":"Verifies language change updates all UI elements correctly.","tags":["settings","i18n","ui"],"severity":"normal","owner":"Marcus","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/settings.spec.ts","line":22,"startTime":"2025-12-15T14:33:26.190Z","retries":0},{"testId":"43a5413b2d4cd77ef4f1-3231c56091301faaf732","name":"User roles restrict access appropriately","fullTitle":" > chromium > user-management.spec.ts > User Management > User roles restrict access appropriately","status":"passed","duration":327,"metadata":{"epic":"Security","feature":"User Management","suite":"Access Control","subSuite":"E2E","description":"Verifies user role permissions are enforced correctly.","tags":["security","rbac"],"severity":"blocker","owner":"Sarah","parentSuite":""},"filePath":"/Users/titus/Documents/GitHub Repos/Craft-Test-Report/example/tests/user-management.spec.ts","line":22,"startTime":"2025-12-15T14:33:26.716Z","retries":0}],"comments":{}};
    // Craft Test Report - Client-side JavaScript

(function() {
  'use strict';

  // State
  let currentComments = {};
  let chart = null;

  // Initialize on DOM ready
  document.addEventListener('DOMContentLoaded', init);

  function init() {
    if (!REPORT_DATA) {
      console.error('No report data found');
      return;
    }

    // Load comments from report data
    currentComments = { ...REPORT_DATA.comments };

    // Render UI
    renderSummary();
    initChart();
    populateEpicFilter();
    renderTests(REPORT_DATA.tests);

    // Setup event listeners
    setupEventListeners();
  }

  function renderSummary() {
    const data = REPORT_DATA;

    document.getElementById('total-count').textContent = data.totalTests;
    document.getElementById('passed-count').textContent = data.passed;
    document.getElementById('failed-count').textContent = data.failed;
    document.getElementById('skipped-count').textContent = data.skipped;
    document.getElementById('duration-value').textContent = formatDuration(data.duration);

    const timestamp = new Date(data.timestamp).toLocaleString();
    document.getElementById('report-timestamp').textContent = timestamp;
    document.getElementById('footer-timestamp').textContent = timestamp;
  }

  function initChart() {
    const ctx = document.getElementById('results-chart');
    if (!ctx) return;

    const data = REPORT_DATA;

    chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Passed', 'Failed', 'Skipped'],
        datasets: [{
          data: [data.passed, data.failed, data.skipped],
          backgroundColor: ['#10b981', '#ef4444', '#f59e0b'],
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        cutout: '55%',
        layout: {
          padding: {
            bottom: 10
          }
        },
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              padding: 12,
              usePointStyle: true,
              pointStyle: 'circle',
              font: {
                size: 12
              }
            }
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                const percentage = ((context.raw / total) * 100).toFixed(1);
                return `${context.label}: ${context.raw} (${percentage}%)`;
              }
            }
          }
        }
      }
    });
  }

  function populateEpicFilter() {
    const epics = new Set();
    REPORT_DATA.tests.forEach(test => {
      if (test.metadata.epic) {
        epics.add(test.metadata.epic);
      }
    });

    const select = document.getElementById('epic-filter');
    epics.forEach(epic => {
      const option = document.createElement('option');
      option.value = epic;
      option.textContent = epic;
      select.appendChild(option);
    });
  }

  function renderTests(tests) {
    const tbody = document.getElementById('tests-body');
    if (!tbody) return;

    tbody.innerHTML = tests.map(test => {
      const testFileId = getTestFileId(test.filePath);
      const cleanErrorTrace = stripAnsiCodes(test.errorTrace || '');
      const retryBadge = test.retries > 0 ? `<span class="retry-badge">â†» ${test.retries} ${test.retries === 1 ? 'retry' : 'retries'}</span>` : '';

      return `
      <tr class="test-row" data-test-id="${escapeHtml(test.testId)}">
        <td>
          <span class="status-badge status-${test.status}">${test.status}</span>${retryBadge}
        </td>
        <td>
          <div class="test-name">${escapeHtml(test.name)}</div>
          <div class="test-id">${escapeHtml(testFileId)}</div>
        </td>
        <td>
          ${test.metadata.description ? escapeHtml(test.metadata.description) : '<span style="color: #94a3b8;">-</span>'}
        </td>
        <td>
          <div class="metadata-tags">
            ${renderMetadataTags(test.metadata)}
          </div>
        </td>
        <td>${formatDuration(test.duration)}</td>
        <td class="error-cell">
          ${cleanErrorTrace ? `
            <div class="error-content" style="display: none;">
              <pre>${escapeHtml(cleanErrorTrace)}</pre>
            </div>
            <span class="error-toggle" onclick="toggleError(this)">Show error</span>
          ` : '<span style="color: #94a3b8;">-</span>'}
        </td>
        <td class="comment-cell">
          <textarea
            class="comment-field"
            data-test-id="${escapeHtml(test.testId)}"
            placeholder="Add interpretation or notes..."
          >${escapeHtml(currentComments[test.testId] || '')}</textarea>
        </td>
      </tr>
    `}).join('');

    // Add change listeners to comment fields
    tbody.querySelectorAll('.comment-field').forEach(field => {
      field.addEventListener('change', handleCommentChange);
      field.addEventListener('input', handleCommentChange);
    });
  }

  function renderMetadataTags(metadata) {
    const tags = [];

    if (metadata.severity) {
      tags.push(`<span class="metadata-tag severity-${metadata.severity}">${metadata.severity}</span>`);
    }
    if (metadata.owner) {
      tags.push(`<span class="metadata-tag owner">@${escapeHtml(metadata.owner)}</span>`);
    }
    if (metadata.epic) {
      tags.push(`<span class="metadata-tag">${escapeHtml(metadata.epic)}</span>`);
    }
    if (metadata.feature) {
      tags.push(`<span class="metadata-tag">${escapeHtml(metadata.feature)}</span>`);
    }
    if (metadata.tags && metadata.tags.length > 0) {
      metadata.tags.forEach(tag => {
        tags.push(`<span class="metadata-tag">${escapeHtml(tag)}</span>`);
      });
    }

    return tags.join('') || '<span style="color: #94a3b8;">-</span>';
  }

  function setupEventListeners() {
    // Search
    const searchInput = document.getElementById('search');
    if (searchInput) {
      searchInput.addEventListener('input', debounce(filterTests, 200));
    }

    // Status filter
    const statusFilter = document.getElementById('status-filter');
    if (statusFilter) {
      statusFilter.addEventListener('change', filterTests);
    }

    // Severity filter
    const severityFilter = document.getElementById('severity-filter');
    if (severityFilter) {
      severityFilter.addEventListener('change', filterTests);
    }

    // Epic filter
    const epicFilter = document.getElementById('epic-filter');
    if (epicFilter) {
      epicFilter.addEventListener('change', filterTests);
    }

    // Export PDF
    const exportBtn = document.getElementById('export-pdf');
    if (exportBtn) {
      exportBtn.addEventListener('click', exportPDF);
    }
  }

  function filterTests() {
    const searchTerm = (document.getElementById('search')?.value || '').toLowerCase();
    const statusFilter = document.getElementById('status-filter')?.value || 'all';
    const severityFilter = document.getElementById('severity-filter')?.value || 'all';
    const epicFilter = document.getElementById('epic-filter')?.value || 'all';

    const filtered = REPORT_DATA.tests.filter(test => {
      // Search match
      const searchMatch = !searchTerm ||
        test.name.toLowerCase().includes(searchTerm) ||
        test.testId.toLowerCase().includes(searchTerm) ||
        (test.metadata.description || '').toLowerCase().includes(searchTerm);

      // Status match
      const statusMatch = statusFilter === 'all' || test.status === statusFilter;

      // Severity match
      const severityMatch = severityFilter === 'all' || test.metadata.severity === severityFilter;

      // Epic match
      const epicMatch = epicFilter === 'all' || test.metadata.epic === epicFilter;

      return searchMatch && statusMatch && severityMatch && epicMatch;
    });

    renderTests(filtered);
  }

  function handleCommentChange(event) {
    const testId = event.target.dataset.testId;
    const value = event.target.value.trim();

    if (value) {
      currentComments[testId] = value;
    } else {
      delete currentComments[testId];
    }
  }

  function exportPDF() {
    // Update comments before print
    document.querySelectorAll('.comment-field').forEach(field => {
      const testId = field.dataset.testId;
      const value = field.value.trim();
      currentComments[testId] = value;

      // Mark empty comments for hiding in print
      if (!value) {
        field.classList.add('empty-comment');
      } else {
        field.classList.remove('empty-comment');
      }
    });

    // Expand all errors for PDF
    document.querySelectorAll('.error-content').forEach(el => {
      el.style.display = 'block';
    });
    document.querySelectorAll('.error-toggle').forEach(el => {
      el.style.display = 'none';
    });

    // Trigger print dialog
    window.print();

    // Restore after short delay
    setTimeout(() => {
      document.querySelectorAll('.error-content').forEach(el => {
        el.style.display = 'none';
      });
      document.querySelectorAll('.error-toggle').forEach(el => {
        el.style.display = 'inline';
        el.textContent = 'Show error';
      });
      // Remove empty-comment class
      document.querySelectorAll('.comment-field').forEach(field => {
        field.classList.remove('empty-comment');
      });
    }, 1000);
  }

  // Utility functions
  function getTestFileId(filePath) {
    if (!filePath) return '';
    // Extract filename and remove .spec.ts/.spec.js/.test.ts/.test.js
    const fileName = filePath.split('/').pop() || '';
    return fileName.replace(/\.(spec|test)\.(ts|js)$/, '');
  }

  function stripAnsiCodes(text) {
    if (!text) return '';
    // Remove ANSI escape codes for cleaner display
    return text.replace(/\x1b\[[0-9;]*m/g, '');
  }

  function formatDuration(ms) {
    if (ms < 1000) return `${ms}ms`;
    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;
    const minutes = Math.floor(ms / 60000);
    const seconds = ((ms % 60000) / 1000).toFixed(0);
    return `${minutes}m ${seconds}s`;
  }

  function escapeHtml(text) {
    if (!text) return '';
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  function showNotification(message, isError = false) {
    // Simple notification
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 24px;
      background: ${isError ? '#fee2e2' : '#d1fae5'};
      color: ${isError ? '#dc2626' : '#059669'};
      border-radius: 8px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      animation: slideIn 0.3s ease;
    `;
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }

  // Global function for error toggle
  window.toggleError = function(element) {
    const content = element.previousElementSibling;
    if (content.style.display === 'none') {
      content.style.display = 'block';
      element.textContent = 'Hide error';
    } else {
      content.style.display = 'none';
      element.textContent = 'Show error';
    }
  };

  // Add CSS animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
  `;
  document.head.appendChild(style);
})();

  </script>
</body>
</html>
